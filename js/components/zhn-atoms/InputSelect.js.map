{"version":3,"sources":["../../../src/components/zhn-atoms/InputSelect.jsx"],"names":["ZhSelect","React","createClass","getDefaultProps","options","optionName","optionNames","isUpdateOptions","getInitialState","domOptionsCache","indexActiveOption","props","_optionName","_optionNames","value","isShowOption","isValidDomOptionsCache","isLocalMode","componentWillReceiveProps","nextProps","_setStateToInit","shouldComponentUpdate","nextState","componentDidUpdate","state","domActiveOption","_getDomForActiveOption","_decorateOfDomActiveOption","_makeVisibleOfDomActiveOption","setState","refs","classList","add","_decorateActiveOption","_undecorateActiveOption","remove","_undecorateOfDomActiveOption","offsetTop","scrollTop","domOptions","_makeVisibleActiveOption","_filterOptionsToState","valueFor","toLowerCase","filter","option","i","caption","indexOf","_handlerInputChange","event","target","arr","length","push","_handlerInputKeyDown","keyCode","item","onSelect","preventDefault","offsetTop2","undefined","_handlerToggleOptions","_handlerClickOption","index","renderOptions","_domOptions","map","_styleDiv","styles","itemOdd","itemEven","Object","assign","itemDiv","bind","width","_styleOptions","display","_styleDivWidth","_numberFilteredItems","_numberAllItems","rootOptionDiv","c","optionDiv","optionsFooter","fileredSpan","_renderAfterInput","isLoading","isLoadingFailed","_styleArrow","arrowCell","arrow","spinnerCell","spinnerFailedCell","onLoadOption","render","styleRoot","borderColor","_styleInputWidth","_styleHr","placeholder","_domAfterInput","_placeholder","rootDiv","domInputText","inputText","inputHr","focusInput","focus","focusNotValidInput"],"mappings":";;;;;;;AAAA;;AAEA;;AAGA,IAAMA,QAAQ,GAAGC,kBAAMC,WAAN,CAAkB;AAAA;AACjCC,EAAAA,eADiC,6BAChB;AACf,WAAO;AACLC,MAAAA,OAAO,EAAG,EADL;AAELC,MAAAA,UAAU,EAAG,EAFR;AAGLC,MAAAA,WAAW,EAAG,EAHT;AAILC,MAAAA,eAAe,EAAG;AAJb,KAAP;AAMD,GARgC;AASjCC,EAAAA,eAAe,EAAE,2BAAU;AACxB,SAAKC,eAAL,GAAuB,IAAvB;AACA,SAAKC,iBAAL,GAAyB,CAAzB;;AAFwB,sBAGU,KAAKC,KAHf;AAAA,QAGjBN,UAHiB,eAGjBA,UAHiB;AAAA,QAGLC,WAHK,eAGLA,WAHK;AAAA,QAIlBM,WAJkB,GAIHP,UAAD,GAAe,MAAMA,UAArB,GAAkC,EAJ9B;AAAA,QAKlBQ,YALkB,GAKFP,WAAD,GAAgB,MAAMA,WAAtB,GACLD,UAAD,GAAeO,WAAf,GAA6B,EANpB;;AAOxB,WAAO;AACLE,MAAAA,KAAK,EAAE,EADF;AAELC,MAAAA,YAAY,EAAE,KAFT;AAGLX,MAAAA,OAAO,EAAE,KAAKO,KAAL,CAAWP,OAHf;AAILC,MAAAA,UAAU,EAAGO,WAJR;AAKLN,MAAAA,WAAW,EAAGO,YALT;AAMLG,MAAAA,sBAAsB,EAAE,KANnB;AAOLC,MAAAA,WAAW,EAAE;AAPR,KAAP;AASF,GAzBgC;AA2BjCC,EAAAA,yBAAyB,EAAE,mCAASC,SAAT,EAAmB;AAC5C,QAAI,KAAKR,KAAL,KAAeQ,SAAnB,EAA6B;AAC3B,UAAI,KAAKR,KAAL,CAAWP,OAAX,KAAuBe,SAAS,CAACf,OAAjC,IACGe,SAAS,CAACZ,eADjB,EACiC;AAC/B;AACA,aAAKa,eAAL,CAAqBD,SAAS,CAACf,OAA/B;AACD;AACF;AACF,GAnCgC;AAqCjCiB,EAAAA,qBAAqB,EAAE,+BAASF,SAAT,EAAoBG,SAApB,EAA8B;AACnD,QAAI,KAAKX,KAAL,KAAeQ,SAAf,IAA4BA,SAAS,CAACZ,eAA1C,EAA2D;AACzDe,MAAAA,SAAS,CAACL,WAAV,GAAwB,KAAxB;AACD,KAFD,MAEO;AACLK,MAAAA,SAAS,CAACL,WAAV,GAAwB,IAAxB;AACD;;AAED,WAAO,IAAP;AACD,GA7CgC;AA+CjCM,EAAAA,kBAAkB,EAAE,8BAAU;AAC3B;AACA,QAAI,KAAKC,KAAL,CAAWT,YAAf,EAA4B;AAC1B,UAAIU,eAAe,GAAG,KAAKC,sBAAL,EAAtB;;AACA,WAAKC,0BAAL,CAAgCF,eAAhC;;AACA,WAAKG,6BAAL,CAAmCH,eAAnC;AACF;AACF,GAtDgC;AAwDjCL,EAAAA,eAxDiC,2BAwDjBhB,OAxDiB,EAwDT;AACtB,SAAKM,iBAAL,GAAyB,CAAzB;AACA,SAAKmB,QAAL,CAAc;AACZf,MAAAA,KAAK,EAAG,EADI;AAEZC,MAAAA,YAAY,EAAG,KAFH;AAGZX,MAAAA,OAAO,EAAGA,OAHE;AAIZY,MAAAA,sBAAsB,EAAG;AAJb,KAAd;AAMD,GAhEgC;AAkEjCU,EAAAA,sBAAsB,EAAE,kCAAU;AAChC,WAAO,KAAKI,IAAL,CAAU,MAAI,KAAKpB,iBAAnB,CAAP;AACD,GApEgC;AAsEjCiB,EAAAA,0BAA0B,EAAE,oCAASF,eAAT,EAAyB;AACnD,QAAIA,eAAJ,EAAoB;AAClBA,MAAAA,eAAe,CAACM,SAAhB,CAA0BC,GAA1B,CAA8B,oBAA9B;AACD;AACF,GA1EgC;AA4EjCC,EAAAA,qBAAqB,EAAE,iCAAU;AAC/B,QAAIR,eAAe,GAAG,KAAKK,IAAL,CAAU,MAAI,KAAKpB,iBAAnB,CAAtB;AACAe,IAAAA,eAAe,CAACM,SAAhB,CAA0BC,GAA1B,CAA8B,oBAA9B;AACD,GA/EgC;AAiFjCE,EAAAA,uBAAuB,EAAE,mCAAU;AACjC,QAAI,KAAKJ,IAAL,CAAU,MAAM,KAAKpB,iBAArB,CAAJ,EAA4C;AAC1C,WAAKoB,IAAL,CAAU,MAAM,KAAKpB,iBAArB,EAAwCqB,SAAxC,CAAkDI,MAAlD,CAAyD,oBAAzD;AACD;AACF,GArFgC;AAuFjCC,EAAAA,4BAA4B,EAAE,sCAASX,eAAT,EAAyB;AACpD,QAAIA,eAAJ,EAAoB;AAClBA,MAAAA,eAAe,CAACM,SAAhB,CAA0BI,MAA1B,CAAiC,oBAAjC;AACF;AACF,GA3FgC;AA6FjCP,EAAAA,6BAA6B,EAAE,uCAASH,eAAT,EAAyB;AACtD,QAAIA,eAAJ,EAAoB;AAClB,UAAMY,SAAS,GAAGZ,eAAe,CAACY,SAAlC;AACA,UAAMC,SAAS,GAAG,KAAKC,UAAL,CAAgBD,SAAlC;;AACA,UAAMD,SAAS,GAAGC,SAAb,GAA0B,EAA/B,EAAkC;AAC/B,aAAKC,UAAL,CAAgBD,SAAhB,IAA8BD,SAAS,GAAGC,SAAZ,GAAwB,EAAtD;AACF;;AACD,UAAMD,SAAS,GAAGC,SAAb,GAA0B,CAA/B,EAAiC;AAC/B,aAAKC,UAAL,CAAgBD,SAAhB,GAA2B,CAA3B;AACD;AACF;AACF,GAxGgC;AA0GjCE,EAAAA,wBAAwB,EAAE,oCAAU;AAClC,QAAIf,eAAe,GAAG,KAAKK,IAAL,CAAU,MAAI,KAAKpB,iBAAnB,CAAtB;AAEA,QAAI2B,SAAS,GAAGZ,eAAe,CAACY,SAAhC;AACA,QAAIC,SAAS,GAAG,KAAKC,UAAL,CAAgBD,SAAhC;;AACA,QAAMD,SAAS,GAAGC,SAAb,GAA0B,EAA/B,EAAkC;AAC9B,WAAKC,UAAL,CAAgBD,SAAhB,IAA8BD,SAAS,GAAGC,SAAZ,GAAwB,EAAtD;AACH;AACF,GAlHgC;AAoHjCG,EAAAA,qBAAqB,EAAE,+BAASrC,OAAT,EAAkBU,KAAlB,EAAwB;AAC5C,QAAM4B,QAAQ,GAAG5B,KAAK,CAAC6B,WAAN,EAAjB;AACA,WAAOvC,OAAO,CAACwC,MAAR,CAAgB,UAACC,MAAD,EAASC,CAAT,EAAe;AACpC,aAAOD,MAAM,CAACE,OAAP,CAAeJ,WAAf,GAA6BK,OAA7B,CAAqCN,QAArC,MAAmD,CAAC,CAA3D;AACD,KAFM,CAAP;AAGF,GAzHgC;AA2HjCO,EAAAA,mBAAmB,EAAE,6BAASC,KAAT,EAAe;AAClC,QAAMpC,KAAK,GAAGoC,KAAK,CAACC,MAAN,CAAarC,KAA3B;AACA,QAAIsC,GAAG,GAAG,EAAV;;AACA,QAAItC,KAAK,CAACuC,MAAN,KAAiB,KAAK7B,KAAL,CAAWV,KAAX,CAAiBuC,MAAtC,EAA6C;AAC3C,UAAKvC,KAAK,CAACuC,MAAN,GAAa,KAAK7B,KAAL,CAAWV,KAAX,CAAiBuC,MAAnC,EAA0C;AACxCD,QAAAA,GAAG,GAAG,KAAKX,qBAAL,CAA2B,KAAKjB,KAAL,CAAWpB,OAAtC,EAA+CU,KAA/C,CAAN;AACD,OAFD,MAEO,IAAKA,KAAK,CAACuC,MAAN,GAAa,KAAK7B,KAAL,CAAWV,KAAX,CAAiBuC,MAAnC,EAA2C;AAChDD,QAAAA,GAAG,GAAG,KAAKX,qBAAL,CAA2B,KAAK9B,KAAL,CAAWP,OAAtC,EAA+CU,KAA/C,CAAN;AACD;;AACD,UAAIsC,GAAG,CAACC,MAAJ,KAAe,CAAnB,EAAqB;AACnBD,QAAAA,GAAG,CAACE,IAAJ,CAAS;AAACP,UAAAA,OAAO,EAAE,kBAAV;AAA8BjC,UAAAA,KAAK,EAAE;AAArC,SAAT;AACD;;AACD,WAAKoB,uBAAL;;AACA,WAAKxB,iBAAL,GAAyB,CAAzB;AACA,WAAKmB,QAAL,CAAc;AACZf,QAAAA,KAAK,EAAGA,KADI;AAEZC,QAAAA,YAAY,EAAG,IAFH;AAGZC,QAAAA,sBAAsB,EAAG,KAHb;AAIZZ,QAAAA,OAAO,EAAGgD;AAJE,OAAd;AAMD;AACF,GAhJgC;AAkJjCG,EAAAA,oBAAoB,EAAE,8BAASL,KAAT,EAAe;AACnC,YAAOA,KAAK,CAACM,OAAb;AACE;AACA,WAAK,EAAL;AAAS;AACN,cAAMC,IAAI,GAAG,KAAKjC,KAAL,CAAWpB,OAAX,CAAmB,KAAKM,iBAAxB,CAAb;;AAEA,cAAI+C,IAAI,IAAIA,IAAI,CAACV,OAAjB,EAAyB;AACvB,iBAAKlB,QAAL,CAAc;AACZf,cAAAA,KAAK,EAAG2C,IAAI,CAACV,OADD;AAEZhC,cAAAA,YAAY,EAAG,KAFH;AAGZC,cAAAA,sBAAsB,EAAG;AAHb,aAAd;;AAMA,gBAAIyC,IAAI,CAAC3C,KAAL,KAAe,UAAnB,EAA8B;AAC5B,mBAAKH,KAAL,CAAW+C,QAAX,CAAoBD,IAApB;AACD,aAFD,MAEO;AACL,mBAAK9C,KAAL,CAAW+C,QAAX,CAAoB,IAApB;AACD;AACF;;AACJ;AAAO;AACP;;AACA,WAAK,EAAL;AAAS;AACP,cAAI,KAAKlC,KAAL,CAAWT,YAAf,EAA4B;AAC1B,iBAAKc,QAAL,CAAc;AAACd,cAAAA,YAAY,EAAG;AAAhB,aAAd;AACD,WAFD,MAEO;AACL,iBAAKmB,uBAAL;;AACA,iBAAKd,eAAL,CAAqB,KAAKT,KAAL,CAAWP,OAAhC;;AACA,iBAAKO,KAAL,CAAW+C,QAAX,CAAoB,IAApB;AACD;;AACH;AAAO;AACP;;AACA,WAAK,EAAL;AAAS;AACP,cAAI,CAAC,KAAKlC,KAAL,CAAWT,YAAhB,EAA6B;AAC3B,iBAAKc,QAAL,CAAc;AAACd,cAAAA,YAAY,EAAG;AAAhB,aAAd;AACD,WAFD,MAEO;AACLmC,YAAAA,KAAK,CAACS,cAAN;;AAEA,gBAAIlC,eAAe,GAAG,KAAKC,sBAAL,EAAtB;;AAEA,gBAAID,eAAJ,EAAoB;AACjB,mBAAKW,4BAAL,CAAkCX,eAAlC;;AAEA,mBAAKf,iBAAL,IAA0B,CAA1B;;AACA,kBAAI,KAAKA,iBAAL,IAAwB,KAAKc,KAAL,CAAWpB,OAAX,CAAmBiD,MAA/C,EAAsD;AACnD,qBAAK3C,iBAAL,GAAyB,CAAzB;AACA,qBAAK6B,UAAL,CAAgBD,SAAhB,GAA4B,CAA5B;AACF;;AAEDb,cAAAA,eAAe,GAAG,KAAKC,sBAAL,EAAlB;;AACA,mBAAKC,0BAAL,CAAgCF,eAAhC;;AAEA,kBAAMY,SAAS,GAAG,KAAKP,IAAL,CAAU,MAAI,KAAKpB,iBAAnB,EAAsC2B,SAAxD;AACA,kBAAMC,SAAS,GAAG,KAAKC,UAAL,CAAgBD,SAAlC;;AACA,kBAAMD,SAAS,GAAGC,SAAb,GAA0B,EAA/B,EAAkC;AAC/B,qBAAKC,UAAL,CAAgBD,SAAhB,IAA8BD,SAAS,GAAGC,SAAZ,GAAwB,EAAtD;AACF;AACH;AACF;;AACH;AAAQ;AACR;;AACA,WAAK,EAAL;AAAS;AACP,cAAI,KAAKd,KAAL,CAAWT,YAAf,EAA4B;AAC1BmC,YAAAA,KAAK,CAACS,cAAN;;AAEA,gBAAIlC,gBAAe,GAAG,KAAKC,sBAAL,EAAtB;;AACA,gBAAID,gBAAJ,EAAoB;AAClB,mBAAKW,4BAAL,CAAkCX,gBAAlC;;AAEA,mBAAKf,iBAAL,IAA0B,CAA1B;;AACA,kBAAI,KAAKA,iBAAL,GAAyB,CAA7B,EAA+B;AAC7B,qBAAKA,iBAAL,GAAyB,KAAKc,KAAL,CAAWpB,OAAX,CAAmBiD,MAAnB,GAA4B,CAArD;AACA,oBAAMO,UAAU,GAAG,KAAK9B,IAAL,CAAU,MAAI,KAAKpB,iBAAnB,EAAsC2B,SAAzD;AACA,qBAAKE,UAAL,CAAgBD,SAAhB,GAA4BsB,UAA5B;AACD;;AAEDnC,cAAAA,gBAAe,GAAG,KAAKC,sBAAL,EAAlB;;AACA,mBAAKC,0BAAL,CAAgCF,gBAAhC;;AAEA,kBAAMY,UAAS,GAAGZ,gBAAe,CAACY,SAAlC;AACA,kBAAMC,UAAS,GAAG,KAAKC,UAAL,CAAgBD,SAAlC;;AACA,kBAAMD,UAAS,GAAGC,UAAb,GAA0B,EAA/B,EAAkC;AAChC,qBAAKC,UAAL,CAAgBD,SAAhB,IAA+B,MAAMD,UAAS,GAAGC,UAAlB,CAA/B;AACD;AACF;AACF;;AACH;AAAO;;AACP;AAAS,eAAOuB,SAAP;AArFX;AAuFD,GA1OgC;AA4OjCC,EAAAA,qBAAqB,EAAE,iCAAU;AAC/B,SAAKjC,QAAL,CAAc;AAACd,MAAAA,YAAY,EAAE,CAAC,KAAKS,KAAL,CAAWT;AAA3B,KAAd;AACD,GA9OgC;AAgPjCgD,EAAAA,mBAAmB,EAAE,6BAASN,IAAT,EAAeO,KAAf,EAAsBd,KAAtB,EAA4B;AAC/C,SAAKxC,iBAAL,GAAyBsD,KAAzB;AACA,SAAKnC,QAAL,CAAc;AACZf,MAAAA,KAAK,EAAG2C,IAAI,CAACV,OADD;AAEZhC,MAAAA,YAAY,EAAG;AAFH,KAAd;AAIA,SAAKJ,KAAL,CAAW+C,QAAX,CAAoBD,IAApB;AACD,GAvPgC;AA0PjCQ,EAAAA,aAAa,EAAE,yBAAU;AAAA;;AAAA,sBACiC,KAAKzC,KADtC;AAAA,QAChBT,YADgB,eAChBA,YADgB;AAAA,QACFX,OADE,eACFA,OADE;AAAA,QACOY,sBADP,eACOA,sBADP;;AAGvB,QAAIkD,WAAJ;;AACA,QAAI9D,OAAJ,EAAY;AACV,UAAI,CAACY,sBAAL,EAA4B;AACzBkD,QAAAA,WAAW,GAAG9D,OAAO,CAAC+D,GAAR,CAAY,UAACV,IAAD,EAAOO,KAAP,EAAe;AACvC,cAAMI,SAAS,GAAIJ,KAAK,GAAG,CAAR,KAAc,CAAf,GAAoBK,wBAAOC,OAA3B,GAAqCD,wBAAOE,QAA9D;;AACA,iBACE;AACG,YAAA,SAAS,EAAC,YADb;AAEG,YAAA,KAAK,EAAEC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,wBAAOK,OAAzB,EAAkCN,SAAlC,CAFV;AAGG,YAAA,GAAG,EAAEJ,KAHR;AAIG,YAAA,GAAG,EAAE,MAAIA,KAJZ;AAKG,YAAA,OAAO,EAAE,KAAI,CAACD,mBAAL,CAAyBY,IAAzB,CAA8B,KAA9B,EAAoClB,IAApC,EAA0CO,KAA1C;AALZ,aAOIP,IAAI,CAACV,OAPT,CADF;AAWF,SAbc,CAAd;AAcD,aAAKtC,eAAL,GAAuByD,WAAvB;AACD,OAhBD,MAgBO;AACLA,QAAAA,WAAW,GAAG,KAAKzD,eAAnB;AACD;AACF;;AAEK,QAACmE,KAAD,GAAU,KAAKjE,KAAf,CAACiE,KAAD;AAAA,QACCC,aADD,GACiB9D,YAAY,GAAG;AAAC+D,MAAAA,OAAO,EAAE;AAAV,KAAH,GAAwB;AAAEA,MAAAA,OAAO,EAAE;AAAX,KADrD;AAAA,QAEAC,cAFA,GAEkBH,KAAD,GAAU;AAAEA,MAAAA,KAAK,EAAEA,KAAK,GAAC;AAAf,KAAV,GAAiC,IAFlD;AAAA,QAGAI,oBAHA,GAGwB5E,OAAO,CAAC,CAAD,CAAP,IAAeA,OAAO,CAAC,CAAD,CAAP,CAAWU,KAAX,KAAqB,UAArC,GACCV,OAAO,CAACiD,MADT,GACkB,CAJzC;AAAA,QAKA4B,eALA,GAKkB,KAAKtE,KAAL,CAAWP,OAAX,GAAqB,KAAKO,KAAL,CAAWP,OAAX,CAAmBiD,MAAxC,GAAiD,CALnE;;AAON,WACI;AAAK,MAAA,KAAK,EAAEmB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,wBAAOa,aAAzB,EAAwCL,aAAxC,EAAuDE,cAAvD;AAAZ,OACE;AACG,MAAA,GAAG,EAAE,aAAAI,CAAC;AAAA,eAAI,KAAI,CAAC5C,UAAL,GAAkB4C,CAAtB;AAAA,OADT;AAEG,MAAA,GAAG,EAAC,GAFP;AAGG,MAAA,KAAK,EAAEX,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,wBAAOe,SAAzB,EAAoCP,aAApC,EAAmDE,cAAnD;AAHV,OAKGb,WALH,CADF,EAQE;AAAK,MAAA,GAAG,EAAC,GAAT;AAAa,MAAA,KAAK,EAAEG,wBAAOgB;AAA3B,OACE;AAAM,MAAA,KAAK,EAAEhB,wBAAOiB;AAApB,oBACYN,oBADZ,SACqCC,eADrC,CADF,CARF,CADJ;AAgBD,GA3SgC;AA6SjCM,EAAAA,iBA7SiC,6BA6SfC,SA7Se,EA6SJC,eA7SI,EA6SaC,WA7Sb,EA6SyB;AACxD,QAAI,CAACF,SAAD,IAAc,CAACC,eAAnB,EAAmC;AACjC,aACE;AACG,QAAA,KAAK,EAAEpB,wBAAOsB,SADjB;AAEG,QAAA,OAAO,EAAE,KAAK7B;AAFjB,SAGE;AAAM,QAAA,KAAK,EAAEU,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,wBAAOuB,KAAzB,EAAgCF,WAAhC;AAAb,QAHF,CADF;AAOD,KARD,MAQO,IAAIF,SAAJ,EAAc;AACnB,aACE;AACE,QAAA,KAAK,EAAEnB,wBAAOwB,WADhB;AAEE,uBAAY;AAFd,QADF;AAOD,KARM,MAQA,IAAIJ,eAAJ,EAAqB;AAC1B,aACE;AACE,QAAA,KAAK,EAAEpB,wBAAOyB,iBADhB;AAEE,uBAAY,eAFd;AAGE,QAAA,OAAO,EAAE,KAAKnF,KAAL,CAAWoF;AAHtB,QADF;AAQD;AACF,GAxUgC;AA0UjCC,EAAAA,MAAM,EAAE,kBAAU;AAAA;;AAAA,uBACW,KAAKrF,KADhB;AAAA,QACTiE,KADS,gBACTA,KADS;AAAA,QACFqB,SADE,gBACFA,SADE;AAAA,uBAE4B,KAAKzE,KAFjC;AAAA,QAETV,KAFS,gBAETA,KAFS;AAAA,QAEFG,WAFE,gBAEFA,WAFE;AAAA,QAEWF,YAFX,gBAEWA,YAFX;;AAIhB,QAAM2E,WAAW,GAAG3E,YAAY,GAAG;AAACmF,MAAAA,WAAW,EAAE;AAAd,KAAH,GAAsD,IAAtF;;AAEA,QAAInB,cAAc,GAAG,IAArB;AACA,QAAIoB,gBAAgB,GAAG,IAAvB;AACA,QAAIC,QAAQ,GAAG,IAAf;;AACA,QAAIxB,KAAJ,EAAU;AACRG,MAAAA,cAAc,GAAG;AAAEH,QAAAA,KAAK,EAAEA,KAAK,GAAG;AAAjB,OAAjB;AACAuB,MAAAA,gBAAgB,GAAG;AAAEvB,QAAAA,KAAK,EAAGA,KAAK,GAAC,EAAP,GAAa;AAAtB,OAAnB;AACAwB,MAAAA,QAAQ,GAAG;AAAExB,QAAAA,KAAK,EAAGA,KAAK,GAAC,EAAP,GAAa;AAAtB,OAAX;AACD;;AAED,QAAMV,WAAW,GAAIjD,WAAW,IAAIF,YAAhB,GAAgC,KAAKkD,aAAL,EAAhC,GAAuD,IAA3E;;AAfgB,uBAiBmC,KAAKtD,KAjBxC;AAAA,QAiBR6E,SAjBQ,gBAiBRA,SAjBQ;AAAA,QAiBGC,eAjBH,gBAiBGA,eAjBH;AAAA,QAiBoBY,WAjBpB,gBAiBoBA,WAjBpB;AAAA,uBAkBmB,KAAK7E,KAlBxB;AAAA,QAkBRnB,UAlBQ,gBAkBRA,UAlBQ;AAAA,QAkBIC,WAlBJ,gBAkBIA,WAlBJ;;AAoBhB,QAAIgG,cAAJ,EAAoBC,YAApB;;AACA,QAAI,CAACf,SAAD,IAAc,CAACC,eAAnB,EAAmC;AACjCc,MAAAA,YAAY,GAAGF,WAAD,GAAgBA,WAAhB,cAAuChG,UAAvC,QAAd;AACAiG,MAAAA,cAAc,GACZ;AACG,QAAA,KAAK,EAAEjC,wBAAOsB,SADjB;AAEG,QAAA,OAAO,EAAE,KAAK7B;AAFjB,SAGE;AAAM,QAAA,KAAK,EAAEU,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBJ,wBAAOuB,KAAzB,EAAgCF,WAAhC;AAAb,QAHF,CADF;AAOD,KATD,MASO,IAAIF,SAAJ,EAAc;AACnBe,MAAAA,YAAY,eAAWjG,WAAX,QAAZ;AACAgG,MAAAA,cAAc,GACZ;AACE,QAAA,KAAK,EAAEjC,wBAAOwB,WADhB;AAEE,uBAAY;AAFd,QADF;AAOD,KATM,MASA,IAAIJ,eAAJ,EAAqB;AACzBc,MAAAA,YAAY,eAAWjG,WAAX,YAAZ;AACAgG,MAAAA,cAAc,GACb;AACE,QAAA,KAAK,EAAEjC,wBAAOyB,iBADhB;AAEE,uBAAY,eAFd;AAGE,QAAA,OAAO,EAAE,KAAKnF,KAAL,CAAWoF;AAHtB,QADD;AAQF;;AAGD,WACE;AAAK,MAAA,KAAK,EAAEvB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBJ,wBAAOmC,OAAxB,EAAiCzB,cAAjC,EAAiDkB,SAAjD;AAAZ,OACE;AACG,MAAA,GAAG,EAAE,aAAAd,CAAC;AAAA,eAAI,MAAI,CAACsB,YAAL,GAAoBtB,CAAxB;AAAA,OADT;AAEG,MAAA,IAAI,EAAC,MAFR;AAGG,MAAA,KAAK,EAAErE,KAHV;AAIG,MAAA,KAAK,EAAE0D,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBJ,wBAAOqC,SAAxB,EAAmCP,gBAAnC,CAJV;AAKG,MAAA,WAAW,EAAEI,YALhB;AAMG,MAAA,QAAQ,EAAE,KAAKtD,mBANlB;AAOG,MAAA,SAAS,EAAE,KAAKM;AAPnB,MADF,EAUG+C,cAVH,EAWE;AAAI,MAAA,KAAK,EAAE9B,MAAM,CAACC,MAAP,CAAc,EAAd,EAAiBJ,wBAAOsC,OAAxB,EAAiCP,QAAjC;AAAX,MAXF,EAYGlC,WAZH,CADF;AAiBD,GA/YgC;AAiZjC0C,EAAAA,UAAU,EAAE,sBAAU;AACpB,SAAKH,YAAL,CAAkBI,KAAlB;AACD,GAnZgC;AAqZjCC,EAAAA,kBAAkB,EAAE,8BAAU;AAC5B,SAAKL,YAAL,CAAkBI,KAAlB;AACD;AAvZgC,CAAlB,CAAjB;;eA2Ze7G,Q","sourcesContent":["import React from 'react';\r\n\r\nimport styles from './InputSelect.Style';\r\n\r\n\r\nconst ZhSelect = React.createClass({\r\n  getDefaultProps(){\r\n    return {\r\n      options : [],\r\n      optionName : '',\r\n      optionNames : '',\r\n      isUpdateOptions : false\r\n    }\r\n  },\r\n  getInitialState: function(){\r\n     this.domOptionsCache = null;\r\n     this.indexActiveOption = 0;\r\n     const {optionName, optionNames} = this.props\r\n         , _optionName = (optionName) ? ' ' + optionName : ''\r\n         , _optionNames = (optionNames) ? ' ' + optionNames :\r\n                    (optionName) ? _optionName : '';\r\n     return {\r\n       value: '',\r\n       isShowOption: false,\r\n       options: this.props.options,\r\n       optionName : _optionName,\r\n       optionNames : _optionNames,\r\n       isValidDomOptionsCache: false,\r\n       isLocalMode: false\r\n     }\r\n  },\r\n\r\n  componentWillReceiveProps: function(nextProps){\r\n    if (this.props !== nextProps){\r\n      if (this.props.options !== nextProps.options\r\n          || nextProps.isUpdateOptions){\r\n        //New options come from Parent - Clear domCache, Init State\r\n        this._setStateToInit(nextProps.options);\r\n      }\r\n    }\r\n  },\r\n\r\n  shouldComponentUpdate: function(nextProps, nextState){\r\n    if (this.props !== nextProps || nextProps.isUpdateOptions) {\r\n      nextState.isLocalMode = false;\r\n    } else {\r\n      nextState.isLocalMode = true;\r\n    }\r\n\r\n    return true;\r\n  },\r\n\r\n  componentDidUpdate: function(){\r\n     //Decorate Active Option\r\n     if (this.state.isShowOption){\r\n       let domActiveOption = this._getDomForActiveOption();\r\n       this._decorateOfDomActiveOption(domActiveOption);\r\n       this._makeVisibleOfDomActiveOption(domActiveOption);\r\n    }\r\n  },\r\n\r\n  _setStateToInit(options){\r\n    this.indexActiveOption = 0;\r\n    this.setState({\r\n      value : '',\r\n      isShowOption : false,\r\n      options : options,\r\n      isValidDomOptionsCache : false\r\n    });\r\n  },\r\n\r\n  _getDomForActiveOption: function(){\r\n    return this.refs[\"v\"+this.indexActiveOption];\r\n  },\r\n\r\n  _decorateOfDomActiveOption: function(domActiveOption){\r\n    if (domActiveOption){\r\n      domActiveOption.classList.add(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _decorateActiveOption: function(){\r\n    let domActiveOption = this.refs[\"v\"+this.indexActiveOption];\r\n    domActiveOption.classList.add(\"option-row__active\");\r\n  },\r\n\r\n  _undecorateActiveOption: function(){\r\n    if (this.refs[\"v\" + this.indexActiveOption]){\r\n      this.refs[\"v\" + this.indexActiveOption].classList.remove(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _undecorateOfDomActiveOption: function(domActiveOption){\r\n     if (domActiveOption){\r\n       domActiveOption.classList.remove(\"option-row__active\");\r\n    }\r\n  },\r\n\r\n  _makeVisibleOfDomActiveOption: function(domActiveOption){\r\n    if (domActiveOption){\r\n      const offsetTop = domActiveOption.offsetTop;\r\n      const scrollTop = this.domOptions.scrollTop;\r\n      if ( (offsetTop - scrollTop) > 70){\r\n         this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n      }\r\n      if ( (offsetTop - scrollTop) < 0){\r\n        this.domOptions.scrollTop= 0;\r\n      }\r\n    }\r\n  },\r\n\r\n  _makeVisibleActiveOption: function(){\r\n    let domActiveOption = this.refs[\"v\"+this.indexActiveOption];\r\n\r\n    let offsetTop = domActiveOption.offsetTop;\r\n    let scrollTop = this.domOptions.scrollTop;\r\n    if ( (offsetTop - scrollTop) > 70){\r\n        this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n    }\r\n  },\r\n\r\n  _filterOptionsToState: function(options, value){\r\n     const valueFor = value.toLowerCase();\r\n     return options.filter( (option, i) => {\r\n       return option.caption.toLowerCase().indexOf(valueFor) !== -1\r\n     })\r\n  },\r\n\r\n  _handlerInputChange: function(event){\r\n    const value = event.target.value;\r\n    let arr = [];\r\n    if (value.length !== this.state.value.length){\r\n      if ( value.length>this.state.value.length){\r\n        arr = this._filterOptionsToState(this.state.options, value);\r\n      } else if ( value.length<this.state.value.length) {\r\n        arr = this._filterOptionsToState(this.props.options, value);\r\n      }\r\n      if (arr.length === 0){\r\n        arr.push({caption: 'No results found', value: 'noresult'});\r\n      }\r\n      this._undecorateActiveOption();\r\n      this.indexActiveOption = 0;\r\n      this.setState({\r\n        value : value,\r\n        isShowOption : true,\r\n        isValidDomOptionsCache : false,\r\n        options : arr\r\n      })\r\n    }\r\n  },\r\n\r\n  _handlerInputKeyDown: function(event){\r\n    switch(event.keyCode){\r\n      // enter\r\n      case 13: {\r\n         const item = this.state.options[this.indexActiveOption];\r\n\r\n         if (item && item.caption){\r\n           this.setState({\r\n             value : item.caption,\r\n             isShowOption : false,\r\n             isValidDomOptionsCache : true\r\n           });\r\n\r\n           if (item.value !== 'noresult'){\r\n             this.props.onSelect(item);\r\n           } else {\r\n             this.props.onSelect(null);\r\n           }\r\n         }\r\n      break;}\r\n      //escape\r\n      case 27: {\r\n        if (this.state.isShowOption){\r\n          this.setState({isShowOption : false});\r\n        } else {\r\n          this._undecorateActiveOption();\r\n          this._setStateToInit(this.props.options);\r\n          this.props.onSelect(null);\r\n        }\r\n      break;}\r\n      //down\r\n      case 40: {\r\n        if (!this.state.isShowOption){\r\n          this.setState({isShowOption : true});\r\n        } else {\r\n          event.preventDefault();\r\n\r\n          let domActiveOption = this._getDomForActiveOption();\r\n\r\n          if (domActiveOption){\r\n             this._undecorateOfDomActiveOption(domActiveOption);\r\n\r\n             this.indexActiveOption += 1;\r\n             if (this.indexActiveOption>=this.state.options.length){\r\n                this.indexActiveOption = 0;\r\n                this.domOptions.scrollTop = 0;\r\n             }\r\n\r\n             domActiveOption = this._getDomForActiveOption();\r\n             this._decorateOfDomActiveOption(domActiveOption)\r\n\r\n             const offsetTop = this.refs[\"v\"+this.indexActiveOption].offsetTop;\r\n             const scrollTop = this.domOptions.scrollTop;\r\n             if ( (offsetTop - scrollTop) > 70){\r\n                this.domOptions.scrollTop += (offsetTop - scrollTop - 70);\r\n             }\r\n          }\r\n        }\r\n      break; }\r\n      //up\r\n      case 38: {\r\n        if (this.state.isShowOption){\r\n          event.preventDefault();\r\n\r\n          let domActiveOption = this._getDomForActiveOption();\r\n          if (domActiveOption){\r\n            this._undecorateOfDomActiveOption(domActiveOption);\r\n\r\n            this.indexActiveOption -= 1;\r\n            if (this.indexActiveOption < 0){\r\n              this.indexActiveOption = this.state.options.length - 1;\r\n              const offsetTop2 = this.refs[\"v\"+this.indexActiveOption].offsetTop;\r\n              this.domOptions.scrollTop = offsetTop2;\r\n            }\r\n\r\n            domActiveOption = this._getDomForActiveOption();\r\n            this._decorateOfDomActiveOption(domActiveOption);\r\n\r\n            const offsetTop = domActiveOption.offsetTop;\r\n            const scrollTop = this.domOptions.scrollTop;\r\n            if ( (offsetTop - scrollTop) < 70){\r\n              this.domOptions.scrollTop -= ( 70 - (offsetTop - scrollTop) );\r\n            }\r\n          }\r\n        }\r\n      break;}\r\n      default: return undefined;\r\n    }\r\n  },\r\n\r\n  _handlerToggleOptions: function(){\r\n    this.setState({isShowOption: !this.state.isShowOption});\r\n  },\r\n\r\n  _handlerClickOption: function(item, index, event){\r\n    this.indexActiveOption = index;\r\n    this.setState({\r\n      value : item.caption,\r\n      isShowOption : false\r\n    });\r\n    this.props.onSelect(item);\r\n  },\r\n\r\n\r\n  renderOptions: function(){\r\n    const {isShowOption, options, isValidDomOptionsCache} = this.state;\r\n\r\n    let _domOptions;\r\n    if (options){\r\n      if (!isValidDomOptionsCache){\r\n         _domOptions = options.map((item, index)=>{\r\n           const _styleDiv = (index % 2 === 0) ? styles.itemOdd : styles.itemEven;\r\n           return (\r\n             <div\r\n                className=\"option-row\"\r\n                style={Object.assign({}, styles.itemDiv, _styleDiv)}\r\n                key={index}\r\n                ref={\"v\"+index}\r\n                onClick={this._handlerClickOption.bind(this, item, index)}\r\n              >\r\n                {item.caption}\r\n            </div>\r\n           )\r\n        });\r\n        this.domOptionsCache = _domOptions;\r\n      } else {\r\n        _domOptions = this.domOptionsCache;\r\n      }\r\n    }\r\n\r\n    const {width} = this.props\r\n        ,  _styleOptions = isShowOption ? {display: 'block'} : { display: 'none'}\r\n        , _styleDivWidth = (width) ? { width: width+'px'} : null\r\n        , _numberFilteredItems = (options[0] && (options[0].value !== 'noresult') ) ?\r\n                                  options.length : 0\r\n        , _numberAllItems = this.props.options ? this.props.options.length : 0;\r\n\r\n    return (\r\n        <div style={Object.assign({}, styles.rootOptionDiv, _styleOptions, _styleDivWidth)}>\r\n          <div\r\n             ref={c => this.domOptions = c}\r\n             key=\"1\"\r\n             style={Object.assign({}, styles.optionDiv, _styleOptions, _styleDivWidth)}\r\n           >\r\n            {_domOptions}\r\n          </div>\r\n          <div key=\"2\" style={styles.optionsFooter}>\r\n            <span style={styles.fileredSpan}>\r\n              Filtered {_numberFilteredItems} : {_numberAllItems}\r\n            </span>\r\n          </div>\r\n        </div>\r\n    )\r\n  },\r\n\r\n  _renderAfterInput(isLoading, isLoadingFailed, _styleArrow){\r\n    if (!isLoading && !isLoadingFailed){\r\n      return (\r\n        <span\r\n           style={styles.arrowCell}\r\n           onClick={this._handlerToggleOptions}>\r\n          <span style={Object.assign({}, styles.arrow, _styleArrow)}></span>\r\n        </span>\r\n      );\r\n    } else if (isLoading){\r\n      return (\r\n        <span\r\n          style={styles.spinnerCell}\r\n          data-loader=\"circle\"\r\n        >\r\n        </span>\r\n      )\r\n    } else if (isLoadingFailed) {\r\n      return (\r\n        <span\r\n          style={styles.spinnerFailedCell}\r\n          data-loader=\"circle-failed\"\r\n          onClick={this.props.onLoadOption}\r\n         >\r\n        </span>\r\n      )\r\n    }\r\n  },\r\n\r\n  render: function(){\r\n    const {width, styleRoot} = this.props\r\n        , {value, isLocalMode, isShowOption } = this.state;\r\n\r\n    const _styleArrow = isShowOption ? {borderColor: '#1B75BB transparent transparent'} : null;\r\n\r\n    let _styleDivWidth = null;\r\n    let _styleInputWidth = null;\r\n    let _styleHr = null;\r\n    if (width){\r\n      _styleDivWidth = { width: width + 'px' };\r\n      _styleInputWidth = { width: (width-30) + 'px'};\r\n      _styleHr = { width: (width-40) + 'px'};\r\n    }\r\n\r\n    const _domOptions = (isLocalMode || isShowOption) ? this.renderOptions() : null;\r\n\r\n    const  {isLoading, isLoadingFailed, placeholder} = this.props\r\n        ,  {optionName, optionNames} = this.state;\r\n\r\n    let _domAfterInput, _placeholder;\r\n    if (!isLoading && !isLoadingFailed){\r\n      _placeholder= (placeholder) ? placeholder : `Select${optionName}...`;\r\n      _domAfterInput = (\r\n        <span\r\n           style={styles.arrowCell}\r\n           onClick={this._handlerToggleOptions}>\r\n          <span style={Object.assign({}, styles.arrow, _styleArrow)}></span>\r\n        </span>\r\n      );\r\n    } else if (isLoading){\r\n      _placeholder=`Loading${optionNames}...`;\r\n      _domAfterInput = (\r\n        <span\r\n          style={styles.spinnerCell}\r\n          data-loader=\"circle\"\r\n        >\r\n        </span>\r\n      );\r\n    } else if (isLoadingFailed) {\r\n       _placeholder=`Loading${optionNames} Failed`;\r\n       _domAfterInput = (\r\n        <span\r\n          style={styles.spinnerFailedCell}\r\n          data-loader=\"circle-failed\"\r\n          onClick={this.props.onLoadOption}\r\n         >\r\n        </span>\r\n      )\r\n    }\r\n\r\n\r\n    return (\r\n      <div style={Object.assign({},styles.rootDiv, _styleDivWidth, styleRoot)}>\r\n        <input\r\n           ref={c => this.domInputText = c}\r\n           type=\"text\"\r\n           value={value}\r\n           style={Object.assign({},styles.inputText, _styleInputWidth)}\r\n           placeholder={_placeholder}\r\n           onChange={this._handlerInputChange}\r\n           onKeyDown={this._handlerInputKeyDown}>\r\n        </input>\r\n        {_domAfterInput}\r\n        <hr style={Object.assign({},styles.inputHr, _styleHr)}></hr>\r\n        {_domOptions}\r\n\r\n      </div>\r\n    )\r\n  },\r\n\r\n  focusInput: function(){\r\n    this.domInputText.focus();\r\n  },\r\n\r\n  focusNotValidInput: function(){\r\n    this.domInputText.focus();\r\n  }\r\n\r\n});\r\n\r\nexport default ZhSelect;\r\n"],"file":"InputSelect.js"}