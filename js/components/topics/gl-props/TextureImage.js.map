{"version":3,"sources":["../../../../src/components/topics/gl-props/TextureImage.js"],"names":["TextureImage","vertexShaderCode","fragmentShaderCode","valuesForInit","drawMode","topicLink","type","title","href","isPro","createVertices","target","vertices","vertexCount","length","gl","shaderProgram","buffer","createBuffer","Float32Array","createAttrib","BYTES_PER_ELEMENT","loadTexture","image","document","createElement","crossOrigin","addEventListener","texture","createTexture","sampler","getUniformLocation","pixelStorei","UNPACK_FLIP_Y_WEBGL","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MIN_FILTER","LINEAR","texImage2D","RGB","UNSIGNED_BYTE","uniform1i","src","clearBuffers"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,eAAe;AACnBC,2dADmB;AAmBnBC,4QAnBmB;;AA+BnBC,iBAAgB;AACdC,cAAW,gBADG;AAEdC,eAAY;AACVC,YAAO,SADG;AAEVC,aAAQ,uDAFE;AAGVC,YAAO,+DAHG;AAIVC,aAAQ;AAJE;AAFE,GA/BG;;AAyCnBC,kBAAiB,wBAACC,MAAD,EAAY;AAC3B,QAAMC,WAAWD,OAAOC,QAAP,GAAkB,CACjC,CAAC,CADgC,EAC7B,CAAC,CAD4B,EACxB,CADwB,EACrB,CADqB,EAEhC,CAFgC,EAE7B,CAAC,CAF4B,EAExB,CAFwB,EAErB,CAFqB,EAGjC,CAAC,CAHgC,EAG5B,CAH4B,EAGxB,CAHwB,EAGrB,CAHqB,EAIhC,CAJgC,EAI5B,CAJ4B,EAIxB,CAJwB,EAIrB,CAJqB,CAAnC;AAMAD,WAAOE,WAAP,GAAqBD,SAASE,MAAT,GAAkB,CAAvC;AAP2B,QAQnBC,EARmB,GAQGJ,MARH,CAQnBI,EARmB;AAAA,QAQfC,aARe,GAQGL,MARH,CAQfK,aARe;;AAS3BL,WAAOM,MAAP,GAAgB,eAAKC,YAAL,CAAkBH,EAAlB,EAAsB,IAAII,YAAJ,CAAiBP,QAAjB,CAAtB,CAAhB;AACA,mBAAKQ,YAAL,CACEL,EADF,EACMC,aADN,EACqB,QADrB,EAC+B,CAD/B,EAEEG,aAAaE,iBAAb,GAA+B,CAFjC,EAEoC,CAFpC,EAGE,KAHF,EAIED,YAJF,CAKEL,EALF,EAKMC,aALN,EAKqB,eALrB,EAKsC,CALtC,EAMEG,aAAaE,iBAAb,GAA+B,CANjC,EAOEF,aAAaE,iBAAb,GAA+B,CAPjC,EAQE,KARF;AAUD,GA7DkB;;AA+DnBC,eAAc,qBAACX,MAAD,EAAY;AACxB,QAAMY,QAAQC,SAASC,aAAT,CAAuB,KAAvB,CAAd;AACAF,UAAMG,WAAN,GAAoB,EAApB;AACAH,UAAMI,gBAAN,CAAuB,MAAvB,EAA+B,YAAU;AAAA,UAC9BZ,EAD8B,GACRJ,MADQ,CAC9BI,EAD8B;AAAA,UAC1BC,aAD0B,GACRL,MADQ,CAC1BK,aAD0B;AAAA,UAEhCY,OAFgC,GAEtBb,GAAGc,aAAH,EAFsB;AAAA,UAGhCC,OAHgC,GAGtBf,GAAGgB,kBAAH,CAAsBf,aAAtB,EAAqC,SAArC,CAHsB;;;AAKrCD,SAAGiB,WAAH,CAAejB,GAAGkB,mBAAlB,EAAuC,CAAvC;AACAlB,SAAGmB,aAAH,CAAiBnB,GAAGoB,QAApB;AACApB,SAAGqB,WAAH,CAAerB,GAAGsB,UAAlB,EAA8BT,OAA9B;AACAb,SAAGuB,aAAH,CAAiBvB,GAAGsB,UAApB,EAAgCtB,GAAGwB,kBAAnC,EAAuDxB,GAAGyB,MAA1D;AACAzB,SAAG0B,UAAH,CAAc1B,GAAGsB,UAAjB,EAA6B,CAA7B,EAAgCtB,GAAG2B,GAAnC,EAAwC3B,GAAG2B,GAA3C,EAAgD3B,GAAG4B,aAAnD,EAAkEpB,KAAlE;AACAR,SAAG6B,SAAH,CAAad,OAAb,EAAsB,CAAtB;AACH,KAXD;AAYA;AACAP,UAAMsB,GAAN,GAAY,aAAZ;AACD,GAhFkB;;AAkFnBC,gBAAe,sBAACnC,MAAD,EAAY,CAE1B;;AApFkB,CAArB;;kBAwFeX,Y","file":"TextureImage.js","sourcesContent":["import fnGL from '../gl-fn/fnGL'\r\n\r\nconst TextureImage = {\r\n  vertexShaderCode : `\r\n  attribute vec4 coords;\r\n  attribute float pointSize;\r\n  uniform mat4 transformMatrix;\r\n  uniform mat4 perspectiveMatrix;\r\n  attribute vec4 colors;\r\n  varying vec4 varyingColors;\r\n\r\n  attribute vec2 textureCoords;\r\n  varying vec2 varyingTextureCoords;\r\n  void main(void){\r\n    gl_Position = perspectiveMatrix * transformMatrix * coords;\r\n    gl_PointSize = pointSize;\r\n    varyingColors = colors;\r\n\r\n    varyingTextureCoords = textureCoords;\r\n  }\r\n  `,\r\n  fragmentShaderCode : `\r\n  precision mediump float;\r\n  uniform vec4 color;\r\n  varying vec4 varyingColors;\r\n\r\n  varying vec2 varyingTextureCoords;\r\n  uniform sampler2D sampler;\r\n  void main(void) {\r\n    gl_FragColor = texture2D(sampler, varyingTextureCoords);\r\n  }\r\n  `,\r\n\r\n  valuesForInit : {\r\n    drawMode : \"TRIANGLE_STRIP\",\r\n    topicLink : {\r\n      type : 'EGGHEAD',\r\n      title : 'Egghead : Course : Build Complex 3D models with WebGL',\r\n      href : 'https://egghead.io/courses/build-complex-3d-models-with-webgl',\r\n      isPro : true\r\n    }\r\n  },\r\n\r\n  createVertices : (target) => {\r\n    const vertices = target.vertices = [\r\n      -1, -1,  0, 0,\r\n       1, -1,  1, 0,\r\n      -1,  1,  0, 1,\r\n       1,  1,  1, 1\r\n    ]\r\n    target.vertexCount = vertices.length / 4;\r\n    const { gl, shaderProgram } = target\r\n    target.buffer = fnGL.createBuffer(gl, new Float32Array(vertices))\r\n    fnGL.createAttrib(\r\n      gl, shaderProgram, \"coords\", 2,\r\n      Float32Array.BYTES_PER_ELEMENT*4, 0,\r\n      false\r\n    ).createAttrib(\r\n      gl, shaderProgram, \"textureCoords\", 2,\r\n      Float32Array.BYTES_PER_ELEMENT*4,\r\n      Float32Array.BYTES_PER_ELEMENT*2,\r\n      false\r\n    );\r\n  },\r\n\r\n  loadTexture : (target) => {\r\n    const image = document.createElement(\"img\");\r\n    image.crossOrigin = \"\";\r\n    image.addEventListener(\"load\", function(){\r\n       const { gl, shaderProgram } = target\r\n           , texture = gl.createTexture()\r\n           , sampler = gl.getUniformLocation(shaderProgram, \"sampler\");\r\n\r\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image)\r\n        gl.uniform1i(sampler, 0);\r\n    })\r\n    //image.src = \"https://pbs.twimg.com/profile_images/664169149002874880/z1fmxo00.jpg\"\r\n    image.src = \"img/cat.jpg\";\r\n  },\r\n\r\n  clearBuffers : (target) => {\r\n\r\n  }\r\n\r\n}\r\n\r\nexport default TextureImage\r\n"]}